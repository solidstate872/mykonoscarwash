<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mykonos Carwash</title>

<style>
html, body {
    margin: 0;
    width: 100%;
    height: 100%;
    background: #000;
    overflow: hidden;
    font-family: 'Segoe UI', sans-serif;
    color: white;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    transition: background-color 0.6s ease, color 0.6s ease;
}

/* Landing page text */
.welcome {
    font-size: clamp(1rem, 4vh, 2rem);
    margin-bottom: 10vh;
    max-height: 40%;
    z-index: 3;
    line-height: 1.2;
}

.welcome sup {
    font-size: 0.6em;
    vertical-align: super;
}

.note {
    font-size: clamp(0.8rem, 2.5vh, 1.1rem);
    margin-top: 2vh;
    color: #cccccc;
    z-index: 3;
}

/* White landing bar */
.bar {
    position: absolute;
    top: 50%;
    left: 0;
    width: 100%;
    height: 14px;
    background-color: white;
    transform: translateY(-50%);
    cursor: pointer;
    z-index: 3;
    transition: background-color 0.3s ease;
}

.invert-background {
    background-color: white;
    color: black;
}
.invert-background .bar {
    background-color: black;
}

/* QR styling */
.qr-box {
    position: absolute;
    bottom: 20px;
    right: 20px;
    width: 100px;
    height: 100px;
    background-color: #ffffff;
    display: flex;
    justify-content: center;
    align-items: center;
    border: 2px solid rgba(0,0,0,0.2);
    border-radius: 8px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.5);
    z-index: 3;
    cursor: pointer;
}
.qr-box canvas {
    width: 92px !important;
    height: 92px !important;
}

/* Video */
#videoContainer {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    display: none;
}

#videoPlayer {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    object-fit: cover;
    z-index: 1;
}

.grid-overlay {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    background-image:
        linear-gradient(to right, rgba(0,0,0,0.3) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(0,0,0,0.3) 1px, transparent 1px);
    background-size: 5px 5px;
    z-index: 2;
}

#fullscreenBtn {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 40px;
    height: 40px;
    background-color: rgba(255,255,255,0.2);
    border: 2px solid white;
    border-radius: 8px;
    cursor: pointer;
    z-index: 4;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 20px;
    color: white;
    font-weight: bold;
    transition: background-color 0.3s ease, opacity 0.5s ease;
}
#fullscreenBtn:hover {
    background-color: rgba(255,255,255,0.4);
}

#infoOverlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background-color: rgba(0,0,0,0.85);
    color: white;
    display: none;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 20px;
    z-index: 10;
    flex-direction: column;
}

#infoOverlay p {
    margin: 5px 0;
    font-size: 1.2rem;
}

#infoOverlay .closeBtn {
    margin-top: 20px;
    padding: 8px 16px;
    background-color: white;
    color: black;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
}

/* Build tag */
#buildTag {
    position: fixed;
    bottom: 10px;
    left: 10px;
    font-size: 0.6rem;
    color: rgba(255,255,255,0.35);
    z-index: 20;
    pointer-events: none;
    user-select: none;
}
</style>
</head>

<body>

<div id="buildTag">build 0.2.a</div>

<div class="welcome">
    Welcome to <span style="color:#26A69A; white-space: nowrap;">theVideopage<sup>TM</sup></span> of Mykonos Carwash
</div>
<div class="bar" id="startBar"></div>
<div class="note">Start the experience.</div>

<div id="qrTip" class="qr-box"></div>

<div id="infoOverlay">
    <p>theVideopage™ is designed by Kobus Liebenberg</p>
    <p>Cell: +27 66 121 8440</p>
    <p>Email: kobus.email@gmail.com</p>
    <button class="closeBtn">Close</button>
</div>

<div id="videoContainer">
    <video id="videoPlayer" loop playsinline preload="auto">
        <source src="mykonoscarwash.mp4" type="video/mp4">
    </video>
    <div class="grid-overlay" id="grid"></div>
    <div id="qrBtn" class="qr-box"></div>
    <div id="fullscreenBtn">⛶</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
const url = "https://www.facebook.com/mykonoscarwash/";

/* QR codes */
new QRCode(document.getElementById("qrTip"), {
    text: url,
    width: 85,
    height: 85
});

new QRCode(document.getElementById("qrBtn"), {
    text: url,
    width: 85,
    height: 85
});

const startBar = document.getElementById('startBar');
const qrTip = document.getElementById('qrTip');
const videoContainer = document.getElementById('videoContainer');
const video = document.getElementById('videoPlayer');
const grid = document.getElementById('grid');
const qrBtn = document.getElementById('qrBtn');
const fullscreenBtn = document.getElementById('fullscreenBtn');
const infoOverlay = document.getElementById('infoOverlay');
const closeBtn = document.querySelector('.closeBtn');

/* Desktop hover invert */
startBar.addEventListener('mouseover', () => {
    document.body.classList.add('invert-background');
});
startBar.addEventListener('mouseout', () => {
    document.body.classList.remove('invert-background');
});

function startVideoExperience() {
    videoContainer.style.display = 'block';
    video.play().catch(() => {});
    startBar.style.display = 'none';
    document.querySelector('.welcome').style.display = 'none';
    document.querySelector('.note').style.display = 'none';
    qrTip.style.display = 'none';
}

startBar.addEventListener('click', startVideoExperience);
qrTip.addEventListener('click', startVideoExperience);

qrBtn.addEventListener('click', () => {
    infoOverlay.style.display = 'flex';
});

videoContainer.addEventListener('click', e => {
    if (e.target !== qrBtn && e.target !== fullscreenBtn) {
        video.paused ? video.play() : video.pause();
    }
});

fullscreenBtn.addEventListener('click', () => {
    const req =
        videoContainer.requestFullscreen ||
        videoContainer.webkitRequestFullscreen ||
        videoContainer.msRequestFullscreen;
    if (req) req.call(videoContainer);
});

document.addEventListener('fullscreenchange', toggleUI);
document.addEventListener('webkitfullscreenchange', toggleUI);

function toggleUI() {
    const f = document.fullscreenElement || document.webkitFullscreenElement;
    qrBtn.style.opacity = f ? "0" : "1";
    fullscreenBtn.style.opacity = f ? "0" : "1";
}

closeBtn.addEventListener('click', () => {
    infoOverlay.style.display = 'none';
    video.pause();
    video.currentTime = 0;
    videoContainer.style.display = 'none';
    startBar.style.display = 'block';
    document.querySelector('.welcome').style.display = 'block';
    document.querySelector('.note').style.display = 'block';
    qrTip.style.display = 'flex';
    qrBtn.style.opacity = '1';
    fullscreenBtn.style.opacity = '1';
});

infoOverlay.addEventListener('click', e => {
    if (e.target === infoOverlay) closeBtn.click();
});

/* Mobile-only auto invert pulse */
const isTouchDevice =
    'ontouchstart' in window ||
    navigator.maxTouchPoints > 0;

if (isTouchDevice) {
    let inverted = false;
    setInterval(() => {
        inverted = !inverted;
        document.body.classList.toggle('invert-background', inverted);
    }, 6000);
}
</script>
</body>
</html>
